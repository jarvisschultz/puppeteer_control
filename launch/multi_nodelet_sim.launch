<launch>
  <!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
  <!-- ARGUMENT DEFINITIONS -->
  <!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
  <arg name="winch" default="false" />
  <arg name="vis" default="true" />
  <arg name="file" default="default" />
  <arg name="dir" default="$(find puppeteer_control)/data/" />
  


  <!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
  <!-- SET GLOBAL PARAMETERS --> 
  <!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
  <param name="/winch_bool" type="bool" value="$(arg winch)" />
  <param name="/number_robots" type="int" value="3" />
  <param name="/simulator_noise" type="double" value="0.01" />


  <!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
  <!-- LAUNCH GLOBAL NODES -->
  <!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
  <!-- launch rviz if "vis"=true: -->
  <group if="$(arg vis)">
    <node pkg="rviz" type="rviz" respawn="false" name="rviz"
  	  args="-d $(find puppeteer_control)/launch/max_4_robots_sim.vcg" />
  </group>
  <!-- launch the default calibration -->
  <include file="$(find robot_simulator)/launch/default_calibration_frames.launch" />


  <!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
  <!-- LAUNCH ROBOT NODES -->
  <!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
  
  <!-- robot 1 -->
  <include file="$(find puppeteer_control)/launch/single_robot_sim.launch" >
    <arg name="ns" value="robot_1" />
    <arg name="index" value="1" />
    <arg name="file" value="$(arg file)" />
    <arg name="dir" value="$(arg dir)" />
  </include>

  <!-- robot 2 -->
  <include file="$(find puppeteer_control)/launch/single_robot_sim.launch" >
    <arg name="ns" value="robot_2" />
    <arg name="index" value="4" />
    <arg name="file" value="$(arg file)" />
    <arg name="dir" value="$(arg dir)" />
  </include>

  <!-- robot 3 -->
  <include file="$(find puppeteer_control)/launch/single_robot_sim.launch" >
    <arg name="ns" value="robot_3" />
    <arg name="index" value="5" />
    <arg name="file" value="$(arg file)" />
    <arg name="dir" value="$(arg dir)" />
  </include>

  <!-- <!-\- robot 4 -\-> -->
  <!-- <include file="$(find puppeteer_control)/launch/single_robot_sim.launch" > -->
  <!--   <arg name="ns" value="robot_4" /> -->
  <!--   <arg name="index" value="6" /> -->
  <!--   <arg name="file" value="$(arg file)" /> -->
  <!--   <arg name="dir" value="$(arg dir)" /> -->
  <!-- </include> -->

  <!-- <!-\- robot 5 -\-> -->
  <!-- <include file="$(find puppeteer_control)/launch/single_robot_sim.launch" > -->
  <!--   <arg name="ns" value="robot_5" /> -->
  <!--   <arg name="index" value="7" /> -->
  <!--   <arg name="file" value="$(arg file)" /> -->
  <!--   <arg name="dir" value="$(arg dir)" /> -->
  <!-- </include> -->

  <!-- <!-\- robot 6 -\-> -->
  <!-- <include file="$(find puppeteer_control)/launch/single_robot_sim.launch" > -->
  <!--   <arg name="ns" value="robot_6" /> -->
  <!--   <arg name="index" value="8" /> -->
  <!--   <arg name="file" value="$(arg file)" /> -->
  <!--   <arg name="dir" value="$(arg dir)" /> -->
  <!-- </include> -->

  <!-- <!-\- robot 7 -\-> -->
  <!-- <include file="$(find puppeteer_control)/launch/single_robot_sim.launch" > -->
  <!--   <arg name="ns" value="robot_7" /> -->
  <!--   <arg name="index" value="2" /> -->
  <!--   <arg name="file" value="$(arg file)" /> -->
  <!--   <arg name="dir" value="$(arg dir)" /> -->
  <!-- </include> -->

  <!-- <!-\- robot 8 -\-> -->
  <!-- <include file="$(find puppeteer_control)/launch/single_robot_sim.launch" > -->
  <!--   <arg name="ns" value="robot_8" /> -->
  <!--   <arg name="index" value="3" /> -->
  <!--   <arg name="file" value="$(arg file)" /> -->
  <!--   <arg name="dir" value="$(arg dir)" /> -->
  <!-- </include> -->

  <!--launch the keyboard node-->
  <node pkg="keyboard_node" type="multi_keyboard_node"
  	name="keyboard_interface" output="screen" respawn="true"
  	launch-prefix="xterm -e" />
</launch>
